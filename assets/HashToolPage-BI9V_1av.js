import{u as k,r as c,j as s,b as U,c as M}from"./index-pePUiUqb.js";const f=["SHA-1","SHA-256","SHA-384","SHA-512"],P=["base64","url","hex"],r="__error__",d="__unsupported__",O=()=>{const{t:o,getSection:u}=k(),[a,h]=c.useState(""),[x,i]=c.useState({}),[m,j]=c.useState({base64:"",url:"",hex:""}),[y,b]=c.useState(null),w=u("pages.hashTool.supported"),R=Array.isArray(w.items)?w.items:[],N=w.note??"",T=c.useCallback(async e=>{var H;if(typeof window>"u"||!((H=window.crypto)!=null&&H.subtle)){const l={};f.forEach(g=>{l[g]=r}),l.MD5=d,i(l);return}const n=new TextEncoder().encode(e),p={};await Promise.all(f.map(async l=>{try{const g=await window.crypto.subtle.digest(l,n),D=Array.from(new Uint8Array(g));p[l]=D.map(I=>I.toString(16).padStart(2,"0")).join("")}catch{p[l]=r}})),p.MD5=d,i(p)},[]),S=c.useCallback(e=>{const t={base64:"",url:"",hex:""};try{t.base64=btoa(unescape(encodeURIComponent(e)))}catch{t.base64=r}try{t.url=encodeURIComponent(e)}catch{t.url=r}try{t.hex=Array.from(new TextEncoder().encode(e)).map(n=>n.toString(16).padStart(2,"0")).join(" ")}catch{t.hex=r}j(t)},[]);c.useEffect(()=>{a?(T(a),S(a)):(i({}),j({base64:"",url:"",hex:""})),b(null)},[a,T,S]);const v=(e,t)=>{!e||e===r||e===d||(navigator.clipboard.writeText(e),b(t),setTimeout(()=>b(null),2e3))},C=e=>{try{e==="base64"?h(decodeURIComponent(escape(atob(a)))):e==="url"&&h(decodeURIComponent(a))}catch(t){console.error("Decode error:",t),alert(o("pages.hashTool.messages.decodeError"))}},A=e=>e===d?o("pages.hashTool.messages.md5Unsupported"):e===r?o("pages.hashTool.messages.error"):e,_=!!a.trim();return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:o("pages.hashTool.title")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:o("pages.hashTool.input.label")}),s.jsx("textarea",{rows:5,className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70 resize-none",placeholder:o("pages.hashTool.input.placeholder"),value:a,onChange:e=>h(e.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C("base64"),className:"flex-1 bg-white/10 hover:bg-white/20 text-white py-2 px-4 rounded-lg transition text-sm",children:o("pages.hashTool.actions.decode.base64")}),s.jsx("button",{onClick:()=>C("url"),className:"flex-1 bg-white/10 hover:bg-white/20 text-white py-2 px-4 rounded-lg transition text-sm",children:o("pages.hashTool.actions.decode.url")})]})]})]}),_&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8 animate-slide-in-up",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:o("pages.hashTool.sections.hashes")}),s.jsx("div",{className:"space-y-3",children:[...f,"MD5"].map(e=>{const t=x[e]??(e==="MD5"?d:r),n=A(t);return s.jsx(E,{label:e,value:n,mono:!0,copied:y===e,onCopy:()=>v(t,e),copyDisabled:t===r||t===d},e)})})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8 animate-slide-in-up",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:o("pages.hashTool.sections.encodings")}),s.jsx("div",{className:"space-y-3",children:P.map(e=>{const t=m[e],n=A(t);return s.jsx(E,{label:o(`pages.hashTool.encodings.types.${e}`),value:n,mono:!0,copied:y===e,onCopy:()=>v(t,e),copyDisabled:t===r||!t},e)})})]})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:o("pages.hashTool.sections.supported")}),s.jsx("ul",{className:"text-white/80 text-sm space-y-2 list-disc list-inside",children:R.map((e,t)=>s.jsxs("li",{children:[s.jsx("strong",{children:e.label}),": ",e.value]},`${e.label}-${t}`))}),N&&s.jsx("p",{className:"text-xs text-white/60 mt-3",children:N})]})]})},E=({label:o,value:u,mono:a,copied:h,onCopy:x,copyDisabled:i})=>{const{t:m}=k();return s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/70 text-sm font-medium",children:o}),s.jsx("button",{onClick:x,disabled:i,className:`p-2 rounded-lg transition text-white ${i?"bg-white/5 opacity-60 cursor-not-allowed":"bg-white/10 hover:bg-white/20"}`,title:m("common.copy"),children:h?s.jsx(U,{size:16}):s.jsx(M,{size:16})})]}),s.jsx("p",{className:`text-white ${a?"font-mono text-xs":"text-sm"} break-all`,children:u})]})};export{O as default};

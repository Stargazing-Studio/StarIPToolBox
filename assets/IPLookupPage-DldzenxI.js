import{u as f,r as d,j as e,S as w}from"./index-pePUiUqb.js";const y=()=>{const{t:s}=f(),[l,p]=d.useState(""),[t,m]=d.useState(null),[r,x]=d.useState(!1),[h,u]=d.useState(null),k=o=>/^((25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(25[0-5]|2[0-4]\d|[01]?\d?\d)$/.test(o),g=async()=>{if(!l.trim()){u(s("pages.ipLookup.errors.emptyInput"));return}try{x(!0),u(null),m(null);let o=l.trim();if(!k(o)){const n=await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(o)}&type=A`,{headers:{Accept:"application/dns-json"}});if(!n.ok)throw new Error("dnsQueryFailed");const c=await n.json();if(c.Answer&&c.Answer.length>0)o=c.Answer[0].data;else throw new Error("domainResolveFailed")}const i=await fetch(`https://ipinfo.io/${o}/json?token=`);if(!i.ok)throw new Error("lookupFailed");const b=await i.json();m(b)}catch(o){console.error("Lookup error:",o);const i={dnsQueryFailed:"pages.ipLookup.errors.dnsQueryFailed",domainResolveFailed:"pages.ipLookup.errors.domainResolveFailed",lookupFailed:"pages.ipLookup.errors.lookupFailed"},n=o instanceof Error&&o.message in i?i[o.message]:"pages.ipLookup.errors.lookupFailed";u(s(n))}finally{x(!1)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:s("pages.ipLookup.title")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lookup-input",className:"block text-sm font-medium text-white mb-2",children:s("pages.ipLookup.inputLabel")}),e.jsx("input",{id:"lookup-input",type:"text",className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70",placeholder:s("pages.ipLookup.placeholder"),value:l,onChange:o=>p(o.target.value),onKeyDown:o=>o.key==="Enter"&&g(),disabled:r})]}),e.jsx("button",{onClick:g,disabled:r||!l.trim(),className:"w-full bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold py-3 px-4 rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105",children:s(r?"pages.ipLookup.button.loading":"pages.ipLookup.button.idle")}),h&&e.jsx("p",{className:"text-red-400 text-center text-sm",children:h})]})]}),r&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(w,{size:"md"})}),t&&!r&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8 animate-slide-in-up",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:s("pages.ipLookup.resultsTitle")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{label:s("pages.ipLookup.fields.ip"),value:t.ip,highlight:!0}),e.jsx(a,{label:s("pages.ipLookup.fields.hostname"),value:t.hostname}),e.jsx(a,{label:s("pages.ipLookup.fields.country"),value:t.country}),e.jsx(a,{label:s("pages.ipLookup.fields.region"),value:t.region}),e.jsx(a,{label:s("pages.ipLookup.fields.city"),value:t.city}),e.jsx(a,{label:s("pages.ipLookup.fields.isp"),value:t.org}),e.jsx(a,{label:s("pages.ipLookup.fields.timezone"),value:t.timezone}),e.jsx(a,{label:s("pages.ipLookup.fields.coordinates"),value:t.loc})]})]})]})},a=({label:s,value:l,highlight:p})=>{const{t}=f();return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[e.jsxs("span",{className:"text-white/70 text-sm",children:[s,":"]}),e.jsx("span",{className:`font-mono ${p?"text-sky-400 font-bold":"text-white"}`,children:l||t("common.notAvailable")})]})};export{y as default};

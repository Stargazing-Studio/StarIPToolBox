import{u as N,r as n,j as e,b as y,c as R,i as C}from"./index-pePUiUqb.js";const $=()=>{const{t:l,getSection:h}=N(),{ipListPlaceholder:m=`192.168.1.1
10.0.0.1
172.16.0.1`,serverTypes:d=[],instructions:b=[]}=h("pages.blockRules"),[o,p]=n.useState(""),[i,u]=n.useState("apache"),[r,w]=n.useState(""),[g,x]=n.useState(!1),j=()=>{const s=o.split(`
`).filter(t=>t.trim());if(s.length===0)return;let a="";switch(i){case"apache":a=s.map(t=>`deny from ${t.trim()}`).join(`
`);break;case"nginx":a=s.map(t=>`deny ${t.trim()};`).join(`
`);break;case"iptables":a=s.map(t=>`iptables -A INPUT -s ${t.trim()} -j DROP`).join(`
`);break;case"firewalld":a=s.map(t=>`firewall-cmd --permanent --add-rich-rule='rule family=ipv4 source address=${t.trim()} drop'`).join(`
`),a+=`
firewall-cmd --reload`;break;case"windows":a=s.map(t=>`netsh advfirewall firewall add rule name="Block ${t.trim()}" dir=in action=block remoteip=${t.trim()}`).join(`
`);break}w(a)},f=()=>{navigator.clipboard.writeText(r),x(!0),setTimeout(()=>x(!1),2e3)},v=()=>{const s=i==="apache"?"htaccess":i==="nginx"?"conf":i==="windows"?"bat":"sh",a=new Blob([r],{type:"text/plain"}),t=URL.createObjectURL(a),c=document.createElement("a");c.href=t,c.download=`block-rules.${s}`,c.click(),URL.revokeObjectURL(t)},k=d.length>0?d:[{value:"apache",label:"Apache",desc:".htaccess"},{value:"nginx",label:"Nginx",desc:"nginx.conf"},{value:"iptables",label:"iptables",desc:"Linux Firewall"},{value:"firewalld",label:"firewalld",desc:"RHEL/CentOS"},{value:"windows",label:"Windows",desc:"Firewall"}];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:l("blockRulesGenerator")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:l("ipList")}),e.jsx("textarea",{rows:8,className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70 resize-none",placeholder:m,value:o,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:l("serverFirewallType")}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:k.map(s=>e.jsxs("button",{onClick:()=>u(s.value),className:`py-3 px-4 rounded-lg transition text-sm ${i===s.value?"bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"font-semibold",children:s.label}),e.jsx("div",{className:"text-xs opacity-70",children:s.desc})]},s.value))})]}),e.jsx("button",{onClick:j,disabled:!o.trim(),className:"w-full bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold py-3 px-4 rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105",children:l("generateRules")})]})]}),r&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8 animate-slide-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[l("generatedRules")," (",i,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:f,className:"flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white py-2 px-4 rounded-lg transition text-sm",children:g?e.jsxs(e.Fragment,{children:[e.jsx(y,{})," ",l("copied")]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{})," ",l("copy")]})}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white py-2 px-4 rounded-lg transition text-sm",children:[e.jsx(C,{})," ",l("download")]})]})]}),e.jsx("div",{className:"bg-white/5 rounded-lg p-4 max-h-96 overflow-y-auto custom-scrollbar",children:e.jsx("pre",{className:"text-white text-xs font-mono whitespace-pre-wrap",children:r})})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:l("usageInstructions")}),e.jsx("div",{className:"text-white/80 text-sm space-y-3",children:b.map((s,a)=>e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:s.title}),e.jsxs("p",{className:"mt-1",children:[s.description,s.code&&e.jsxs(e.Fragment,{children:[" ",e.jsx("code",{className:"bg-white/10 px-1 rounded",children:s.code})]})]})]},`${s.title}-${a}`))})]})]})};export{$ as default};

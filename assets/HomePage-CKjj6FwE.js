import{u as nt,r as l,j as e}from"./index-pePUiUqb.js";const it=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),P=(t,i)=>t.replace(/\{(\w+)\}/g,(n,o)=>o in i?String(i[o]):`{${o}}`),ct=t=>{const i=t.split(`
`).map(o=>o.trim()).filter(o=>o).flatMap(o=>{const a=o.match(/(?:(?<protocol>\w+):\/\/)?(?:(?<user>[^:]+):(?<pass>[^@]+)@)?(?<host>[^:]+):(?<port>\d+)/);if(!a||!a.groups)return[];const{groups:c}=a,m={host:c.host,port:parseInt(c.port,10),user:c.user,pass:c.pass,originalString:o};if(c.protocol){const u=c.protocol.toLowerCase();return["http","https","socks4","socks5"].includes(u)?[{...m,protocol:u}]:[]}else return["http","https","socks4","socks5"].map(v=>({...m,protocol:v}))}),n=new Map;for(const o of i){const a=`${o.protocol}://${o.user||""}:${o.pass||""}@${o.host}:${o.port}`;n.has(a)||n.set(a,o)}return Array.from(n.values())},dt=(t,i)=>new Promise(n=>{const o=Math.random()>.3,a=Math.floor(Math.random()*1151)+50;setTimeout(()=>{if(!o){n({...t,status:"unavailable",connectionLatency:a});return}if(i){const c=Math.floor(Math.random()*1301)+200;n({...t,status:"available",connectionLatency:a,websiteLatency:c})}else n({...t,status:"available",connectionLatency:a})},a)}),T=[{id:"host:port",label:"host:port",format:t=>`${t.host}:${t.port}`},{id:"protocol://host:port",label:"protocol://host:port",format:t=>`${t.protocol}://${t.host}:${t.port}`}],ht=[{id:"protocol://user:pass@host:port",label:"protocol://user:pass@host:port",format:t=>t.user&&t.pass?`${t.protocol}://${t.user}:${t.pass}@${t.host}:${t.port}`:`${t.protocol}://${t.host}:${t.port}`},{id:"protocol://host:port:user:pass",label:"protocol://host:port:user:pass",format:t=>t.user&&t.pass?`${t.protocol}://$${t.host}:${t.port}:${t.user}:${t.pass}`:`${t.protocol}://${t.host}:${t.port}`},{id:"host:port@user:pass",label:"host:port@user:pass",format:t=>t.user&&t.pass?`${t.host}:${t.port}@${t.user}:${t.pass}`:`${t.host}:${t.port}`},{id:"host:port:user:pass",label:"host:port:user:pass",format:t=>t.user&&t.pass?`${t.host}:${t.port}:${t.user}:${t.pass}`:`${t.host}:${t.port}`}],xt=({results:t,setResults:i,proxyInput:n,setProxyInput:o,urlInput:a,setUrlInput:c})=>{const{t:m,getSection:u}=nt(),v=u("pages.home"),{header:R,importSection:f,proxyInput:E,targetInput:O,actions:F,progressText:W,copySection:M,filters:G,table:w,emptyStates:A,errors:y}=v,[d,$]=l.useState(!1),[N,p]=l.useState(null),[U,z]=l.useState(0),[g,I]=l.useState("all"),[j,J]=l.useState(""),[k,q]=l.useState(!1),[H,Q]=l.useState(T),[b,V]=l.useState(H[0]),[_,C]=l.useState(!1),[X,B]=l.useState({}),[Y,D]=l.useState(!1),S=l.useRef(null),K=l.useRef(null),x=l.useMemo(()=>t.filter(s=>g==="all"||s.protocol===g),[t,g]);l.useEffect(()=>{const r=x.some(h=>h.user&&h.pass)?[...T,...ht]:T;Q(r),r.find(h=>h.id===b.id)||V(r[0])},[x,b.id]),l.useEffect(()=>{const s=r=>{S.current&&!S.current.contains(r.target)&&C(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),l.useEffect(()=>{var s;!d&&t.length>0&&((s=K.current)==null||s.scrollIntoView({behavior:"smooth",block:"start"}))},[d,t.length]);const Z=(s,r)=>{navigator.clipboard.writeText(s),B({[r]:!0}),setTimeout(()=>B({[r]:!1}),2e3)},tt=()=>{const s=x.map(r=>b.format(r)).join(`
`);navigator.clipboard.writeText(s),D(!0),setTimeout(()=>D(!1),2e3)},et=async()=>{if(!j.trim()){p(y.urlRequired);return}try{q(!0),p(null);const s=await fetch(j.trim());if(!s.ok)throw new Error("NETWORK_ERROR");const r=await s.text();o(r),p(null)}catch(s){console.error("Import error:",s),p(y.importFailed)}finally{q(!1)}},st=l.useCallback(async()=>{$(!0),p(null),i([]),z(0),I("all");const s=ct(n);if(s.length===0){p(y.noValidProxy),$(!1);return}const r=a.trim().length>0,h=s.map((L,lt)=>dt(L,r).then(at=>(z((lt+1)/s.length*100),at))),rt=(await Promise.all(h)).filter(L=>L.status==="available");i(rt),$(!1)},[n,a,i]),ot=s=>s<300?"text-green-400":s<800?"text-orange-400":"text-red-500";return e.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[e.jsxs("header",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-5xl font-bold tracking-tight text-white sm:text-7xl",style:{textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:R.title}),e.jsx("p",{className:"mt-4 text-lg sm:text-xl text-white/80",style:{textShadow:"0 1px 5px rgba(0,0,0,0.5)"},children:R.subtitle})]}),e.jsxs("div",{className:"w-full max-w-4xl p-4 sm:p-8 bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 animate-slide-in-up",children:[e.jsxs("div",{className:"mb-6 p-4 bg-white/5 rounded-lg",children:[e.jsx("label",{htmlFor:"url-import",className:"block text-sm font-medium text-white mb-2",children:f.label}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"url-import",type:"text",className:"flex-1 bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70",placeholder:f.placeholder,value:j,onChange:s=>J(s.target.value),disabled:k}),e.jsx("button",{onClick:et,disabled:k||!j.trim(),className:"bg-white/10 hover:bg-white/20 text-white font-medium py-3 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition",children:k?f.button.loading:f.button.idle})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"proxy-input",className:"block text-sm font-medium text-white mb-2",children:E.label}),e.jsx("textarea",{id:"proxy-input",rows:6,className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70 resize-none",placeholder:E.placeholder,value:n,onChange:s=>o(s.target.value),disabled:d})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url-input",className:"block text-sm font-medium text-white mb-2",children:O.label}),e.jsx("textarea",{id:"url-input",rows:6,className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70 resize-none",placeholder:O.placeholder,value:a,onChange:s=>c(s.target.value),disabled:d})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:st,disabled:d||!n,className:"w-full bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold py-3 px-4 rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105",children:d?F.running:F.start})}),N&&e.jsx("p",{className:"text-red-400 text-center mt-4",children:N})]}),d&&e.jsxs("div",{className:"w-full max-w-4xl mt-6",children:[e.jsx("p",{className:"text-center text-white/80 mb-2",children:P(W,{value:Math.round(U)})}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-white h-2.5 rounded-full",style:{width:`${U}%`,transition:"width 0.2s ease-in-out"}})})]}),!d&&t.length>0&&e.jsxs("div",{ref:K,className:"w-full max-w-4xl mt-8 p-4 sm:p-8 bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:P(M.availableSummary,{available:x.length,total:t.length})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{ref:S,className:"relative",children:[e.jsxs("button",{onClick:()=>C(!_),className:"flex items-center gap-2 text-sm bg-white/10 hover:bg-white/20 text-white font-medium py-2 px-3 rounded-lg transition",children:[P(M.formatPrefix,{label:b.label})," ",e.jsx(it,{})]}),_&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white/20 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl z-10",children:H.map(s=>e.jsx("button",{onClick:()=>{V(s),C(!1)},className:"w-full text-left text-sm px-4 py-2 text-white hover:bg-white/20 transition",children:s.label},s.id))})]}),e.jsx("button",{onClick:tt,className:"text-sm bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold py-2 px-4 rounded-lg hover:opacity-90 transition",children:m(Y?"common.copied":"common.copyAll")})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["all","http","https","socks4","socks5"].map(s=>{const r=g===s,h=s==="all"?G.all:s.toUpperCase();return e.jsx("button",{onClick:()=>I(s),className:`px-4 py-1.5 rounded-full text-sm font-medium transition ${r?"bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold shadow-md":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:h},s)})}),x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-white",children:[e.jsx("thead",{className:"border-b border-white/20 text-white/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 sm:p-3",children:w.proxy}),e.jsx("th",{className:"p-2 sm:p-3",children:w.protocol}),e.jsx("th",{className:"p-2 sm:p-3",children:w.connectionLatency}),a.trim().length>0&&e.jsx("th",{className:"p-2 sm:p-3",children:w.websiteLatency})]})}),e.jsx("tbody",{children:x.map((s,r)=>e.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/10 transition-colors",children:[e.jsx("td",{className:"p-2 sm:p-3 font-mono",children:e.jsx("button",{onClick:()=>Z(b.format(s),`${s.originalString}-${s.protocol}`),className:"flex items-center gap-2 hover:text-sky-400 transition-colors",children:X[`${s.originalString}-${s.protocol}`]?m("common.copied"):`${s.host}:${s.port}`})}),e.jsx("td",{className:"p-2 sm:p-3",children:e.jsx("span",{className:"bg-white/20 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded",children:s.protocol.toUpperCase()})}),e.jsxs("td",{className:`p-2 sm:p-3 font-semibold whitespace-nowrap ${ot(s.connectionLatency)}`,children:[s.connectionLatency,"ms"]}),a.trim().length>0&&e.jsx("td",{className:"p-2 sm:p-3 font-semibold text-cyan-400 whitespace-nowrap",children:s.websiteLatency?`${s.websiteLatency}ms`:m("common.notAvailable")})]},`${s.originalString}-${s.protocol}-${r}`))})]})}):e.jsx("p",{className:"text-center text-white/80 py-8",children:A.noneForFilter})]}),!d&&t.length===0&&!N&&n&&e.jsx("div",{className:"w-full max-w-4xl mt-8 p-8 text-center bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl",children:e.jsx("p",{className:"text-white",children:A.noneOverall})})]})};export{xt as default};

import{u as w,r as n,j as e,d as A}from"./index-pePUiUqb.js";const v=["A","AAAA","CNAME","MX","TXT","NS"],z=()=>{const{t:a,getSection:g}=w(),[l,f]=n.useState(""),[o,m]=n.useState(!1),[p,x]=n.useState({}),[u,c]=n.useState(null),h=g("pages.dnsVisualizer.supported"),j=Array.isArray(h.items)?h.items:[],y=async(s,i)=>{try{const t=await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(s)}&type=${i}`,{headers:{Accept:"application/dns-json"}});if(!t.ok)throw new Error("Query failed");const d=await t.json();return d.Answer?d.Answer.map(r=>({name:r.name,type:r.type===1?"A":r.type===5?"CNAME":r.type===15?"MX":r.type===16?"TXT":r.type===28?"AAAA":r.type===2?"NS":"UNKNOWN",data:r.data,ttl:r.TTL})):[]}catch(t){return console.error("DNS query error:",t),[]}},b=async()=>{if(!l.trim()){c(a("pages.dnsVisualizer.form.errors.domainRequired"));return}m(!0),c(null),x({});const s={};for(const i of v){const t=await y(l.trim(),i);t.length>0&&(s[i]=t)}Object.keys(s).length===0&&c(a("pages.dnsVisualizer.form.errors.noRecords")),x(s),m(!1)},N=s=>a("pages.dnsVisualizer.results.recordTitle",{type:s});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:a("pages.dnsVisualizer.title")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:a("pages.dnsVisualizer.form.domainLabel")}),e.jsx("input",{type:"text",className:"w-full bg-white/10 backdrop-blur-sm rounded-lg p-3 text-sm border border-white/30 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 focus:outline-none transition text-white placeholder:text-white/70",placeholder:a("pages.dnsVisualizer.form.placeholder"),value:l,onChange:s=>f(s.target.value),onKeyDown:s=>s.key==="Enter"&&b(),disabled:o})]}),e.jsx("button",{onClick:b,disabled:o||!l.trim(),className:"w-full bg-gradient-to-r from-sky-400 to-white text-slate-800 font-bold py-3 px-4 rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105",children:a(o?"pages.dnsVisualizer.form.button.loading":"pages.dnsVisualizer.form.button.idle")}),u&&e.jsx("p",{className:"text-red-400 text-center text-sm",children:u})]})]}),Object.keys(p).length>0&&e.jsx("div",{className:"space-y-4 animate-slide-in-up",children:Object.entries(p).map(([s,i])=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(A,{}),N(s)]}),e.jsx("div",{className:"space-y-3",children:i.map((t,d)=>e.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white/70 text-xs mb-1",children:a("pages.dnsVisualizer.results.fields.name")}),e.jsx("p",{className:"text-white font-mono text-sm break-all mb-3",children:t.name}),e.jsx("p",{className:"text-white/70 text-xs mb-1",children:a("pages.dnsVisualizer.results.fields.data")}),e.jsx("p",{className:"text-white font-mono text-sm break-all",children:t.data})]}),typeof t.ttl=="number"&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white/70 text-xs mb-1",children:a("pages.dnsVisualizer.results.fields.ttl")}),e.jsxs("p",{className:"text-white text-sm font-medium",children:[t.ttl,"s"]})]})]})},`${t.name}-${d}`))})]},s))}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:a("pages.dnsVisualizer.supported.title")}),e.jsx("ul",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-white/80 text-sm list-disc list-inside",children:j.map((s,i)=>e.jsx("li",{children:s},i))})]})]})};export{z as default};
